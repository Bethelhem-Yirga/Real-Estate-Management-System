{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Staff</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/marketing_manager.css' %}">
    <style>
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }
    
        .popup-content {
            background-color: #fff;
            padding: 20px;
            max-width: 800px; /* Adjust the maximum width as desired */
            width: 80%; /* Adjust the width as desired */
            max-height: 600px; /* Adjust the maximum height as desired */
            height: 80%; /* Adjust the height as desired */
            overflow: auto;
        }
    
        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
    </style>
   
</head>
<body>

        <section id="menu">
           
           <div class="logo">
              <img src="{% static 'img/logo.png' %}" alt="">
              
           </div>
         

           <div class="items">
            <li><i class="fa fa-chart-pie-alt"></i><a href="#">Dashboard</a></li>
            <li><i class="fab fa-uikit"></i><a href="#" onclick="showWorkOrderPage()">Work Order</a></li>
            <li><i class="fa-solid fa-clipboard-list"></i><a href="#" onclick="showCompletedWorksPage()">Completed Works</a></li>
            <li><i class="fas fa-right-from-bracket"></i><a href="/">Logout</a></li>
        </div>
         
        </section>

        
      <section id="interface"> 
            <div class="navigation"> 
                <div class="n1">

                    <div>
                        <i id="menu-btn" class="fa-fa-bars"></i>
                    </div>


                   
               </div>
               
               <div class="profile">
                  
                <img src="{{ img.url }}" alt="">
                <p style="font-size:13px">  &nbsp {{first_name}} {{ last_name }}
                <br> &nbsp {{email}} </p>
              </div>
              
            </div>

            
        <h3 class="i-name"> 
            Dashboard
        </h3>
.
   
        

<div class="board" id="work-order-board">
            <table width="100%">
                <thead>
                    <tr>
                        <td>Type</td>
                        <td>Property Adress</td>
                        <td>Service</td>

                        <td>Customer Info</td>
                        <td>Employee name</td>
                        <td>Status</td>

                        
                        
                    </tr>
                </thead>

                <tbody>
                   
                    {% for x in all_info %}
                    {% if email == x.employee.email %}
                    {% if  x.status == 'pending' %}
                   <tr>

                    
                    <td class="people">
                        <img src="{{ x.property.image.url }}">
                        <div class="people-de">
                            <h5>{{x.property.propertyType}}</h5>
                            <p>id {{ x.property.id}}</p>
                        </div>
                    </td>

                    <td class="people-des">
                        <h5>{{ x.property.city}}</h5>
                        <p>{{ x.property.area}}</p>
                    </td>

                    
                    <td class="people-des">
                        <h5>{{ x.service}}</h5>
                    </td>
                    <td class="people-des">
                            <h5>{{ x.registration.email}}</h5>
                            <p>{{ x.registration.first_name}} {{ x.registration.last_name}}</p>
                            <p>{{ x.registration.phone_number}}</p>
                    </td>

                    <td class="people-des">
                        <h5>{{ x.employee.email}}</h5>
                        <p>{{ x.employee.first_name}} {{ x.employee.last_name}}</p>
                        <p>{{ x.employee.phone_number}}</p>
                    </td>

                 
                    

                    <td class="active">
                      
                        
                        <a href="{% url 'update_work' askmaintenance_id=x.id %}">{{ x.status}}</a>     
                        
                      

                       
                    </td>

                   

                  </tr>
                  {% endif %}
                   {% endif %}
                   {% endfor %}

                 
                 

                </tbody>

            </table>

        </div>


        
        <div class="board" id="completed-works-board" style="display: none;">          
              <table width="100%">
                <thead>
                    <tr>
                        <td>Type</td>
                        <td>Property Adress</td>
                        <td>Service</td>

                        <td>Customer Info</td>
                        <td>Employee name</td>
                        <td>Status</td>

                        
                        
                    </tr>
                </thead>

                <tbody>
                   
                    {% for x in all_info %}
                    {% if email == x.employee.email %}
                    {% if  x.status == 'completed' %}
                   <tr>

                    
                    <td class="people">
                        <img src="{{ x.property.image.url }}">
                        <div class="people-de">
                            <h5>{{x.property.propertyType}}</h5>
                            <p>id {{ x.property.id}}</p>
                        </div>
                    </td>

                    <td class="people-des">
                        <h5>{{ x.property.city}}</h5>
                        <p>{{ x.property.area}}</p>
                    </td>

                    
                    <td class="people-des">
                        <h5>{{ x.service}}</h5>
                    </td>
                    <td class="people-des">
                            <h5>{{ x.registration.email}}</h5>
                            <p>{{ x.registration.first_name}} {{ x.registration.last_name}}</p>
                            <p>{{ x.registration.phone_number}}</p>
                    </td>

                    <td class="people-des">
                        <h5>{{ x.employee.email}}</h5>
                        <p>{{ x.employee.first_name}} {{ x.employee.last_name}}</p>
                        <p>{{ x.employee.phone_number}}</p>
                    </td>

                 
                    

                    <td class="active">
                        
                        
                        <p>{{ x.status}}</p>    
                        
                       
                       
                    </td>

                   

                  </tr>
                  {% endif %}
                   {% endif %}
                   {% endfor %}

                 
                 

                </tbody>

            </table>

        </div>


       
        <script>
            // Function to show the Work Order page and hide the Completed Works page
            function showWorkOrderPage() {
                document.getElementById("work-order-board").style.display = "block";
                document.getElementById("completed-works-board").style.display = "none";
            }
        
            // Function to show the Completed Works page and hide the Work Order page
            function showCompletedWorksPage() {
                document.getElementById("work-order-board").style.display = "none";
                document.getElementById("completed-works-board").style.display = "block";
            }
        </script>

</body>
</html>